
<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<title>Painel</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
<h2>Painel do Usu√°rio</h2>
<div id="user"></div>
<button id="spin">Girar roleta</button>
<pre id="log"></pre>

<script>
const API = "https://vintage-production.up.railway.app";
const token = localStorage.getItem("vw_token");

async function api(path, opts={}){
  const r = await fetch(API+path, {
    ...opts,
    headers:{
      "Authorization": "Bearer " + token,
      "Content-Type":"application/json"
    }
  });
  return r.json();
}

document.getElementById("spin").onclick = async () => {
  const res = await api("/bonus/spin",{method:"POST"});
  document.getElementById("log").textContent = JSON.stringify(res,null,2);
};

(async()=>{
  const me = await api("/user/me");
  document.getElementById("user").innerHTML =
    "<b>"+me.name+"</b><br>"+me.email;
})();
</script>
</body>
</html>
